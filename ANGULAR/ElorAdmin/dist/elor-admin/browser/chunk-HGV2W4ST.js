import{a as O}from"./chunk-3332PNLT.js";import{b as P,c as h,d as R,e as _,g as M,h as L,i as T,m as D,o as w}from"./chunk-MJSMXMHF.js";import{a as k}from"./chunk-E6XGQANW.js";import"./chunk-PNKEXE34.js";import"./chunk-MJJXFY2L.js";import{Gb as C,Ib as z,Kb as A,La as E,Lb as F,Mb as B,Na as c,Pa as v,Qa as i,Ra as t,Sa as o,Vb as N,Wa as b,Wb as U,Z as g,bb as a,cb as p,db as s,eb as x,jb as y,mb as r,nb as l,ob as S,ua as I,xa as e,ya as f}from"./chunk-6OJ5OLV5.js";function j(u,H){u&1&&o(0,"span",43)}var Z=(()=>{class u{constructor(m,d,n){this.fb=m,this.authService=d,this.userService=n,this.currentUser=null,this.isSaving=!1}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.initForm()}initForm(){this.profileForm=this.fb.group({izena:[this.currentUser?.izena||"",h.required],abizena:[this.currentUser?.abizena||"",h.required],email:[this.currentUser?.email||""],telefonoa:[this.currentUser?.telefonoa||""],helbidea:[this.currentUser?.helbidea||""],pasahitzaBerria:[""],pasahitzaKonfirmatu:[""]})}get userAvatar(){return this.currentUser?.argazkia?`assets/images/${this.currentUser.argazkia}`:"assets/images/default-avatar.png"}getRoleBadgeClass(){switch(this.currentUser?.rola){case"god":return"bg-danger";case"admin":return"bg-primary";case"irakasle":return"bg-success";case"ikasle":return"bg-info";default:return"bg-secondary"}}isFieldInvalid(m){let d=this.profileForm.get(m);return d?d.invalid&&(d.dirty||d.touched):!1}resetForm(){this.initForm()}onSubmit(){if(this.profileForm.invalid)return;this.isSaving=!0;let m=this.profileForm.value;if(m.pasahitzaBerria&&m.pasahitzaBerria!==m.pasahitzaKonfirmatu){alert("Pasahitzak ez datoz bat"),this.isSaving=!1;return}setTimeout(()=>{this.isSaving=!1,alert("Profila eguneratuta")},1e3)}static{this.\u0275fac=function(d){return new(d||u)(f(D),f(O),f(k))}}static{this.\u0275cmp=g({type:u,selectors:[["app-profila"]],standalone:!0,features:[y],decls:105,vars:79,consts:[[1,"profila-page","fade-in"],[1,"mb-4"],[1,"row","g-4"],[1,"col-12","col-lg-4"],[1,"card","text-center"],[1,"card-body"],["alt","Avatar",1,"profile-avatar","mb-3",3,"src"],[1,"badge","mb-3",3,"ngClass"],[1,"text-muted"],[1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-camera","me-2"],[1,"card","mt-4"],[1,"card-header"],[1,"mb-0"],[1,"list-unstyled","mb-0"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between"],[1,"col-12","col-lg-8"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","col-md-6"],["for","izena",1,"form-label"],["type","text","id","izena","formControlName","izena",1,"form-control"],["for","abizena",1,"form-label"],["type","text","id","abizena","formControlName","abizena",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","readonly","",1,"form-control"],["for","telefonoa",1,"form-label"],["type","tel","id","telefonoa","formControlName","telefonoa",1,"form-control"],[1,"col-12"],["for","helbidea",1,"form-label"],["id","helbidea","formControlName","helbidea","rows","2",1,"form-control"],[1,"my-4"],[1,"mb-3"],["for","pasahitzaBerria",1,"form-label"],["type","password","id","pasahitzaBerria","formControlName","pasahitzaBerria",1,"form-control"],["for","pasahitzaKonfirmatu",1,"form-label"],["type","password","id","pasahitzaKonfirmatu","formControlName","pasahitzaKonfirmatu",1,"form-control"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(d,n){d&1&&(i(0,"div",0)(1,"h1",1),a(2),r(3,"translate"),t(),i(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),o(8,"img",6),i(9,"h4"),a(10),t(),i(11,"span",7),a(12),r(13,"uppercase"),r(14,"translate"),t(),i(15,"p",8),a(16),t(),i(17,"button",9),o(18,"i",10),a(19),r(20,"translate"),t()()(),i(21,"div",11)(22,"div",12)(23,"h5",13),a(24),r(25,"translate"),t()(),i(26,"div",5)(27,"ul",14)(28,"li",15)(29,"span",8),a(30),r(31,"translate"),t(),i(32,"strong"),a(33),r(34,"date"),t()(),i(35,"li",16)(36,"span",8),a(37),r(38,"translate"),t(),i(39,"strong"),a(40),r(41,"date"),t()()()()()(),i(42,"div",17)(43,"div",18)(44,"div",12)(45,"h5",13),a(46),r(47,"translate"),t()(),i(48,"div",5)(49,"form",19),b("ngSubmit",function(){return n.onSubmit()}),i(50,"div",20)(51,"div",21)(52,"label",22),a(53),r(54,"translate"),t(),o(55,"input",23),t(),i(56,"div",21)(57,"label",24),a(58),r(59,"translate"),t(),o(60,"input",25),t(),i(61,"div",21)(62,"label",26),a(63),r(64,"translate"),t(),o(65,"input",27),i(66,"small",8),a(67),r(68,"translate"),t()(),i(69,"div",21)(70,"label",28),a(71),r(72,"translate"),t(),o(73,"input",29),t(),i(74,"div",30)(75,"label",31),a(76),r(77,"translate"),t(),o(78,"textarea",32),t()(),o(79,"hr",33),i(80,"h6",34),a(81),r(82,"translate"),t(),i(83,"div",20)(84,"div",21)(85,"label",35),a(86),r(87,"translate"),t(),o(88,"input",36),i(89,"small",8),a(90),r(91,"translate"),t()(),i(92,"div",21)(93,"label",37),a(94),r(95,"translate"),t(),o(96,"input",38),t()(),i(97,"div",39)(98,"button",40),b("click",function(){return n.resetForm()}),a(99),r(100,"translate"),t(),i(101,"button",41),E(102,j,1,0,"span",42),a(103),r(104,"translate"),t()()()()()()()()),d&2&&(e(2),p(l(3,33,"PROFILA.TITLE")),e(6),c("src",n.userAvatar,I),e(2),x("",n.currentUser==null?null:n.currentUser.izena," ",n.currentUser==null?null:n.currentUser.abizena,""),e(),c("ngClass",n.getRoleBadgeClass()),e(),s(" ",l(14,37,l(13,35,"ROLES."+((n.currentUser==null?null:n.currentUser.rola)||"UNKNOWN")))," "),e(4),p(n.currentUser==null?null:n.currentUser.email),e(3),s(" ",l(20,39,"PROFILA.CHANGE_PHOTO")," "),e(5),p(l(25,41,"PROFILA.STATS")),e(6),p(l(31,43,"PROFILA.MEMBER_SINCE")),e(3),p(S(34,45,n.currentUser==null?null:n.currentUser.sortzeData,"dd/MM/yyyy")),e(4),p(l(38,48,"PROFILA.LAST_LOGIN")),e(3),p(S(41,50,n.currentUser==null?null:n.currentUser.azkenSaioa,"dd/MM/yyyy HH:mm")),e(6),p(l(47,53,"PROFILA.EDIT_INFO")),e(3),c("formGroup",n.profileForm),e(4),s(" ",l(54,55,"USER.FIRST_NAME")," "),e(2),v("is-invalid",n.isFieldInvalid("izena")),e(3),s(" ",l(59,57,"USER.LAST_NAME")," "),e(2),v("is-invalid",n.isFieldInvalid("abizena")),e(3),s(" ",l(64,59,"USER.EMAIL")," "),e(4),p(l(68,61,"PROFILA.EMAIL_READONLY")),e(4),s(" ",l(72,63,"USER.PHONE")," "),e(5),s(" ",l(77,65,"USER.ADDRESS")," "),e(5),p(l(82,67,"PROFILA.CHANGE_PASSWORD")),e(5),s(" ",l(87,69,"PROFILA.NEW_PASSWORD")," "),e(4),p(l(91,71,"PROFILA.PASSWORD_HINT")),e(4),s(" ",l(95,73,"PROFILA.CONFIRM_PASSWORD")," "),e(5),s(" ",l(100,75,"COMMON.CANCEL")," "),e(2),c("disabled",n.isSaving),e(),c("ngIf",n.isSaving),e(),s(" ",l(104,77,"COMMON.SAVE")," "))},dependencies:[B,C,z,A,F,w,M,P,R,_,L,T,U,N],styles:[".profile-avatar[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;object-fit:cover;border:5px solid #e9ecef}"]})}}return u})();export{Z as ProfilaComponent};
