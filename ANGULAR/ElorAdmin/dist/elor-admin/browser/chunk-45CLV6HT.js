import{a as Y}from"./chunk-ZCS2VR7V.js";import{a as Q}from"./chunk-KFRKJJ5M.js";import{b as M,c as u,d as y,e as D,g as V,h as U,i as P,j as z,k as w,l as q,m as j,o as G}from"./chunk-MJSMXMHF.js";import{a as K}from"./chunk-LH72YYA6.js";import"./chunk-PNKEXE34.js";import{c as L,e as O,f as C}from"./chunk-MJJXFY2L.js";import{Hb as _,Ib as k,La as x,Mb as R,Na as c,Pa as I,Qa as r,Ra as t,Sa as v,Va as h,Vb as N,Wa as A,Wb as F,Xa as b,Z as S,bb as o,cb as s,db as l,ga as B,ha as g,jb as T,mb as a,nb as n,xa as e,ya as f}from"./chunk-6OJ5OLV5.js";function $(d,E){d&1&&v(0,"app-loading-spinner")}function W(d,E){if(d&1&&(r(0,"option",37),o(1),t()),d&2){let i=E.$implicit;c("ngValue",i.id),e(),l(" ",i.izena," ")}}function J(d,E){d&1&&(r(0,"div",34)(1,"label",46),o(2),a(3,"translate"),t(),r(4,"select",47)(5,"option",48),o(6),a(7,"translate"),t(),r(8,"option",49),o(9),a(10,"translate"),t(),r(11,"option",50),o(12),a(13,"translate"),t()()()),d&2&&(e(2),l(" ",n(3,4,"BILERA.STATUS")," "),e(4),s(n(7,6,"BILERA.STATUS_PROGRAMATUA")),e(3),s(n(10,8,"BILERA.STATUS_BURUTUA")),e(3),s(n(13,10,"BILERA.STATUS_BERTAN_BEHERA")))}function X(d,E){d&1&&v(0,"span",51)}function ee(d,E){if(d&1){let i=h();r(0,"div",9)(1,"div",10)(2,"form",11),A("ngSubmit",function(){B(i);let m=b();return g(m.onSubmit())}),r(3,"div",12)(4,"div",13)(5,"label",14),o(6),a(7,"translate"),t(),v(8,"input",15),r(9,"div",16),o(10),a(11,"translate"),t()(),r(12,"div",17)(13,"label",18),o(14),a(15,"translate"),t(),r(16,"select",19)(17,"option",20),o(18),a(19,"translate"),t(),r(20,"option",21),o(21),a(22,"translate"),t(),r(23,"option",22),o(24),a(25,"translate"),t(),r(26,"option",23),o(27),a(28,"translate"),t(),r(29,"option",24),o(30),a(31,"translate"),t()(),r(32,"div",16),o(33),a(34,"translate"),t()(),r(35,"div",25)(36,"label",26),o(37),a(38,"translate"),t(),v(39,"textarea",27),t(),r(40,"div",17)(41,"label",28),o(42),a(43,"translate"),t(),v(44,"input",29),r(45,"div",16),o(46),a(47,"translate"),t()(),r(48,"div",17)(49,"label",30),o(50),a(51,"translate"),t(),v(52,"input",31),r(53,"div",16),o(54),a(55,"translate"),t()(),r(56,"div",17)(57,"label",32),o(58),a(59,"translate"),t(),v(60,"input",33),r(61,"div",16),o(62),a(63,"translate"),t()(),r(64,"div",34)(65,"label",35),o(66),a(67,"translate"),t(),r(68,"select",36)(69,"option",37),o(70),a(71,"translate"),t(),x(72,W,2,2,"option",38),t(),r(73,"div",16),o(74),a(75,"translate"),t()(),x(76,J,14,12,"div",39),r(77,"div",25)(78,"label",40),o(79),a(80,"translate"),t(),v(81,"textarea",41),t()(),r(82,"div",42)(83,"a",43),o(84),a(85,"translate"),t(),r(86,"button",44),x(87,X,1,0,"span",45),o(88),a(89,"translate"),a(90,"translate"),t()()()()()}if(d&2){let i=b();e(2),c("formGroup",i.bileraForm),e(4),l(" ",n(7,40,"BILERA.NAME")," * "),e(2),I("is-invalid",i.isFieldInvalid("izena")),e(2),l(" ",n(11,42,"VALIDATION.REQUIRED")," "),e(4),l(" ",n(15,44,"BILERA.TYPE")," * "),e(2),I("is-invalid",i.isFieldInvalid("mota")),e(2),s(n(19,46,"COMMON.SELECT")),e(3),s(n(22,48,"BILERA.TYPE_GUZTIAK")),e(3),s(n(25,50,"BILERA.TYPE_HEZKUNTZA")),e(3),s(n(28,52,"BILERA.TYPE_PRIBATUA")),e(3),s(n(31,54,"BILERA.TYPE_BESTE")),e(3),l(" ",n(34,56,"VALIDATION.REQUIRED")," "),e(4),l(" ",n(38,58,"BILERA.DESCRIPTION")," "),e(5),l(" ",n(43,60,"BILERA.DATE")," * "),e(2),I("is-invalid",i.isFieldInvalid("data")),e(2),l(" ",n(47,62,"VALIDATION.REQUIRED")," "),e(4),l(" ",n(51,64,"BILERA.START_TIME")," * "),e(2),I("is-invalid",i.isFieldInvalid("hasieraOrdua")),e(2),l(" ",n(55,66,"VALIDATION.REQUIRED")," "),e(4),l(" ",n(59,68,"BILERA.END_TIME")," * "),e(2),I("is-invalid",i.isFieldInvalid("amaieraOrdua")),e(2),l(" ",n(63,70,"VALIDATION.REQUIRED")," "),e(4),l(" ",n(67,72,"BILERA.SCHOOL")," * "),e(2),I("is-invalid",i.isFieldInvalid("ikastetxeaId")),e(),c("ngValue",null),e(),s(n(71,74,"COMMON.SELECT")),e(2),c("ngForOf",i.ikastetxeak),e(2),l(" ",n(75,76,"VALIDATION.REQUIRED")," "),e(2),c("ngIf",i.isEditMode),e(3),l(" ",n(80,78,"BILERA.NOTES")," "),e(5),l(" ",n(85,80,"COMMON.CANCEL")," "),e(2),c("disabled",i.isSaving),e(),c("ngIf",i.isSaving),e(),l(" ",i.isSaving?n(89,82,"COMMON.SAVING"):n(90,84,"COMMON.SAVE")," ")}}var ve=(()=>{class d{constructor(i,p,m,H,Z){this.fb=i,this.bileraService=p,this.ikastetxeaService=m,this.router=H,this.route=Z,this.ikastetxeak=[],this.isEditMode=!1,this.isLoading=!1,this.isSaving=!1,this.bileraId=null}ngOnInit(){this.initForm(),this.loadIkastetxeak();let i=this.route.snapshot.paramMap.get("id");i&&(this.isEditMode=!0,this.bileraId=parseInt(i,10),this.loadBilera())}initForm(){this.bileraForm=this.fb.group({izena:["",[u.required]],deskribapena:[""],data:["",[u.required]],hasieraOrdua:["",[u.required]],amaieraOrdua:["",[u.required]],ikastetxeaId:[null,[u.required]],mota:["",[u.required]],egoera:["programatua"],oharrak:[""]})}loadIkastetxeak(){this.ikastetxeaService.getAll().subscribe(i=>{this.ikastetxeak=i})}loadBilera(){this.bileraId&&(this.isLoading=!0,this.bileraService.getById(this.bileraId).subscribe({next:i=>{if(i){let p=new Date(i.data).toISOString().split("T")[0];this.bileraForm.patchValue({izena:i.izena,deskribapena:i.deskribapena||"",data:p,hasieraOrdua:i.hasieraOrdua,amaieraOrdua:i.amaieraOrdua,ikastetxeaId:i.ikastetxeaId,mota:i.mota,egoera:i.egoera,oharrak:i.oharrak||""})}this.isLoading=!1},error:()=>{this.isLoading=!1,this.router.navigate(["/bilerak"])}}))}isFieldInvalid(i){let p=this.bileraForm.get(i);return p?p.invalid&&(p.dirty||p.touched):!1}onSubmit(){if(this.bileraForm.invalid){Object.keys(this.bileraForm.controls).forEach(m=>{this.bileraForm.get(m)?.markAsTouched()});return}this.isSaving=!0;let i=this.bileraForm.value;i.data=new Date(i.data),(this.isEditMode?this.bileraService.update(this.bileraId,i):this.bileraService.create(i)).subscribe({next:()=>{this.isSaving=!1,this.router.navigate(["/bilerak"])},error:()=>{this.isSaving=!1}})}static{this.\u0275fac=function(p){return new(p||d)(f(j),f(Q),f(Y),f(O),f(L))}}static{this.\u0275cmp=S({type:d,selectors:[["app-bilera-form"]],standalone:!0,features:[T],decls:17,vars:15,consts:[[1,"bilera-form-page","fade-in"],["aria-label","breadcrumb",1,"mb-4"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/bilerak"],[1,"breadcrumb-item","active"],[1,"mb-4"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","col-md-8"],["for","izena",1,"form-label"],["type","text","id","izena","formControlName","izena",1,"form-control"],[1,"invalid-feedback"],[1,"col-12","col-md-4"],["for","mota",1,"form-label"],["id","mota","formControlName","mota",1,"form-select"],["value",""],["value","guztiak"],["value","hezkuntza_saila"],["value","pribatua"],["value","beste_publiko"],[1,"col-12"],["for","deskribapena",1,"form-label"],["id","deskribapena","formControlName","deskribapena","rows","3",1,"form-control"],["for","data",1,"form-label"],["type","date","id","data","formControlName","data",1,"form-control"],["for","hasieraOrdua",1,"form-label"],["type","time","id","hasieraOrdua","formControlName","hasieraOrdua",1,"form-control"],["for","amaieraOrdua",1,"form-label"],["type","time","id","amaieraOrdua","formControlName","amaieraOrdua",1,"form-control"],[1,"col-12","col-md-6"],["for","ikastetxeaId",1,"form-label"],["id","ikastetxeaId","formControlName","ikastetxeaId",1,"form-select"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","col-12 col-md-6",4,"ngIf"],["for","oharrak",1,"form-label"],["id","oharrak","formControlName","oharrak","rows","2",1,"form-control"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["routerLink","/bilerak",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["for","egoera",1,"form-label"],["id","egoera","formControlName","egoera",1,"form-select"],["value","programatua"],["value","burutua"],["value","bertan_behera"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(p,m){p&1&&(r(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),o(5),a(6,"translate"),t()(),r(7,"li",5),o(8),a(9,"translate"),a(10,"translate"),t()()(),r(11,"h1",6),o(12),a(13,"translate"),a(14,"translate"),t(),x(15,$,1,0,"app-loading-spinner",7)(16,ee,91,86,"div",8),t()),p&2&&(e(5),s(n(6,5,"BILERAK.TITLE")),e(3),l(" ",m.isEditMode?n(9,7,"BILERAK.EDIT"):n(10,9,"BILERAK.NEW")," "),e(4),l(" ",m.isEditMode?n(13,11,"BILERAK.EDIT_TITLE"):n(14,13,"BILERAK.NEW_TITLE")," "),e(3),c("ngIf",m.isLoading),e(),c("ngIf",!m.isLoading))},dependencies:[R,_,k,G,V,w,q,M,z,y,D,U,P,C,F,N,K],encapsulation:2})}}return d})();export{ve as BileraFormComponent};
