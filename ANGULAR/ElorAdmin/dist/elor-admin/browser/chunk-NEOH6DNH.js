import{a as N}from"./chunk-KFRKJJ5M.js";import{a as R}from"./chunk-3332PNLT.js";import{a as U}from"./chunk-LH72YYA6.js";import{a as T}from"./chunk-E6XGQANW.js";import"./chunk-PNKEXE34.js";import{f as y}from"./chunk-MJJXFY2L.js";import{Gb as B,Hb as A,Ib as _,Kb as D,La as g,Lb as C,Mb as O,Na as m,Qa as t,Ra as i,Sa as s,Ta as E,Ua as f,Vb as M,Wb as L,Xa as S,Z as x,bb as n,cb as p,db as c,eb as h,jb as I,mb as a,nb as d,ob as k,xa as e,ya as v}from"./chunk-6OJ5OLV5.js";function P(l,b){if(l&1&&(t(0,"div",29)(1,"div",30)(2,"div",31),s(3,"i",32),t(4,"div",33),n(5),i(),t(6,"div",34),n(7),a(8,"translate"),i(),s(9,"a",35),i()(),t(10,"div",30)(11,"div",36),s(12,"i",37),t(13,"div",33),n(14),i(),t(15,"div",34),n(16),a(17,"translate"),i(),s(18,"a",38),i()(),t(19,"div",30)(20,"div",39),s(21,"i",40),t(22,"div",33),n(23),i(),t(24,"div",34),n(25),a(26,"translate"),i(),s(27,"a",41),i()(),t(28,"div",30)(29,"div",42),s(30,"i",43),t(31,"div",33),n(32),i(),t(33,"div",34),n(34),a(35,"translate"),i(),s(36,"a",44),i()()()),l&2){let r=S();e(5),p(r.counts.ikasleak),e(2),p(d(8,8,"DASHBOARD.STUDENTS")),e(7),p(r.counts.irakasleak),e(2),p(d(17,10,"DASHBOARD.TEACHERS")),e(7),p(r.gaurkoKopurua),e(2),p(d(26,12,"DASHBOARD.TODAY_MEETINGS")),e(7),p(r.counts.adminak),e(2),p(d(35,14,"DASHBOARD.ADMINS"))}}function H(l,b){l&1&&s(0,"app-loading-spinner",45),l&2&&m("size",2)}function z(l,b){l&1&&(t(0,"div",46),s(1,"i",47),t(2,"p",48),n(3),a(4,"translate"),i()()),l&2&&(e(3),p(d(4,1,"DASHBOARD.NO_MEETINGS")))}function w(l,b){if(l&1&&(t(0,"tr")(1,"td")(2,"strong"),n(3),i(),t(4,"small",52),n(5),i()(),t(6,"td"),n(7),a(8,"date"),i(),t(9,"td"),n(10),i(),t(11,"td"),n(12),i(),t(13,"td")(14,"span",53),n(15),a(16,"translate"),i()()()),l&2){let r=b.$implicit,u=S(2);e(3),p(r.izena),e(2),p(r.deskribapena),e(2),p(k(8,8,r.data,"dd/MM/yyyy")),e(3),h("",r.hasieraOrdua," - ",r.amaieraOrdua,""),e(2),p(r.ikastetxeaIzena),e(2),m("ngClass",u.getStatusBadgeClass(r.egoera)),e(),c(" ",d(16,11,"BILERA.STATUS_"+r.egoera.toUpperCase())," ")}}function F(l,b){if(l&1&&(t(0,"div",49)(1,"table",50)(2,"thead")(3,"tr")(4,"th"),n(5),a(6,"translate"),i(),t(7,"th"),n(8),a(9,"translate"),i(),t(10,"th"),n(11),a(12,"translate"),i(),t(13,"th"),n(14),a(15,"translate"),i(),t(16,"th"),n(17),a(18,"translate"),i()()(),t(19,"tbody"),g(20,w,17,13,"tr",51),i()()()),l&2){let r=S();e(5),p(d(6,6,"BILERA.NAME")),e(3),p(d(9,8,"BILERA.DATE")),e(3),p(d(12,10,"BILERA.TIME")),e(3),p(d(15,12,"BILERA.LOCATION")),e(3),p(d(18,14,"BILERA.STATUS")),e(3),m("ngForOf",r.upcomingBilerak)}}function G(l,b){l&1&&(E(0),t(1,"a",54),s(2,"i",55),n(3),a(4,"translate"),i(),t(5,"a",56),s(6,"i",57),n(7),a(8,"translate"),i(),f()),l&2&&(e(3),c(" ",d(4,2,"DASHBOARD.ADD_USER")," "),e(4),c(" ",d(8,4,"DASHBOARD.ADD_MEETING")," "))}var Z=(()=>{class l{constructor(r,u,o){this.authService=r,this.userService=u,this.bileraService=o,this.currentUser=null,this.counts={ikasleak:0,irakasleak:0,adminak:0},this.gaurkoKopurua=0,this.upcomingBilerak=[],this.isLoading=!0}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.loadData()}loadData(){this.authService.isAdmin()&&this.userService.getCounts().subscribe(r=>{this.counts=r}),this.bileraService.getGaurkoKopurua().subscribe(r=>{this.gaurkoKopurua=r}),this.bileraService.getUpcoming(5).subscribe({next:r=>{this.upcomingBilerak=r,this.isLoading=!1},error:()=>{this.isLoading=!1}})}getStatusBadgeClass(r){switch(r){case"programatua":return"bg-primary";case"burutua":return"bg-success";case"bertan_behera":return"bg-danger";default:return"bg-secondary"}}getRoleBadgeClass(){switch(this.currentUser?.rola){case"god":return"bg-danger";case"admin":return"bg-primary";case"irakasle":return"bg-success";case"ikasle":return"bg-info";default:return"bg-secondary"}}static{this.\u0275fac=function(u){return new(u||l)(v(R),v(T),v(N))}}static{this.\u0275cmp=x({type:l,selectors:[["app-dashboard"]],standalone:!0,features:[I],decls:68,vars:48,consts:[[1,"dashboard","fade-in"],[1,"dashboard-header","mb-4"],[1,"text-muted"],["class","row g-4 mb-4",4,"ngIf"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-calendar-week","me-2"],["routerLink","/bilerak",1,"btn","btn-sm","btn-outline-primary"],[1,"card-body"],[3,"size",4,"ngIf"],["class","text-center text-muted py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"col-12","col-lg-4"],[1,"card-header"],[1,"bi","bi-activity","me-2"],[1,"d-grid","gap-2"],[4,"ngIf"],["routerLink","/ikastetxeak",1,"btn","btn-outline-info"],[1,"bi","bi-map","me-2"],["routerLink","/profila",1,"btn","btn-outline-secondary"],[1,"bi","bi-person-circle","me-2"],[1,"card","mt-4"],[1,"bi","bi-info-circle","me-2"],[1,"list-unstyled","mb-0"],[1,"mb-2"],[1,"badge","ms-1",3,"ngClass"],[1,"row","g-4","mb-4"],[1,"col-12","col-sm-6","col-xl-3"],[1,"dashboard-card","card-ikasleak","position-relative"],[1,"bi","bi-mortarboard","card-icon"],[1,"card-value"],[1,"card-label"],["routerLink","/ikasleak",1,"stretched-link"],[1,"dashboard-card","card-irakasleak","position-relative"],[1,"bi","bi-person-workspace","card-icon"],["routerLink","/irakasleak",1,"stretched-link"],[1,"dashboard-card","card-bilerak","position-relative"],[1,"bi","bi-calendar-event","card-icon"],["routerLink","/bilerak",1,"stretched-link"],[1,"dashboard-card","card-admin","position-relative"],[1,"bi","bi-shield-check","card-icon"],["routerLink","/erabiltzaileak",1,"stretched-link"],[3,"size"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-calendar-x","display-4"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[4,"ngFor","ngForOf"],[1,"d-block","text-muted"],[1,"badge",3,"ngClass"],["routerLink","/erabiltzaileak/berria",1,"btn","btn-outline-primary"],[1,"bi","bi-person-plus","me-2"],["routerLink","/bilerak/berria",1,"btn","btn-outline-success"],[1,"bi","bi-calendar-plus","me-2"]],template:function(u,o){u&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3),a(4,"translate"),i(),t(5,"p",2),n(6),a(7,"translate"),i()(),g(8,P,37,16,"div",3),t(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",7)(13,"h5",8),s(14,"i",9),n(15),a(16,"translate"),i(),t(17,"a",10),n(18),a(19,"translate"),i()(),t(20,"div",11),g(21,H,1,1,"app-loading-spinner",12)(22,z,5,3,"div",13)(23,F,21,16,"div",14),i()()(),t(24,"div",15)(25,"div",6)(26,"div",16)(27,"h5",8),s(28,"i",17),n(29),a(30,"translate"),i()(),t(31,"div",11)(32,"div",18),g(33,G,9,6,"ng-container",19),t(34,"a",20),s(35,"i",21),n(36),a(37,"translate"),i(),t(38,"a",22),s(39,"i",23),n(40),a(41,"translate"),i()()()(),t(42,"div",24)(43,"div",16)(44,"h5",8),s(45,"i",25),n(46),a(47,"translate"),i()(),t(48,"div",11)(49,"ul",26)(50,"li",27)(51,"strong"),n(52),a(53,"translate"),i(),n(54),i(),t(55,"li",27)(56,"strong"),n(57),a(58,"translate"),i(),n(59),i(),t(60,"li")(61,"strong"),n(62),a(63,"translate"),i(),t(64,"span",28),n(65),a(66,"uppercase"),a(67,"translate"),i()()()()()()()()),u&2&&(e(3),h("",d(4,22,"DASHBOARD.WELCOME"),", ",o.currentUser==null?null:o.currentUser.izena,"!"),e(3),p(d(7,24,"DASHBOARD.SUBTITLE")),e(2),m("ngIf",o.authService.isAdmin()),e(7),c(" ",d(16,26,"DASHBOARD.UPCOMING_MEETINGS")," "),e(3),c(" ",d(19,28,"DASHBOARD.VIEW_ALL")," "),e(3),m("ngIf",o.isLoading),e(),m("ngIf",!o.isLoading&&o.upcomingBilerak.length===0),e(),m("ngIf",!o.isLoading&&o.upcomingBilerak.length>0),e(6),c(" ",d(30,30,"DASHBOARD.QUICK_ACTIONS")," "),e(4),m("ngIf",o.authService.isAdmin()),e(3),c(" ",d(37,32,"DASHBOARD.VIEW_MAP")," "),e(4),c(" ",d(41,34,"DASHBOARD.MY_PROFILE")," "),e(6),c(" ",d(47,36,"DASHBOARD.MY_INFO")," "),e(6),c("",d(53,38,"USER.NAME"),":"),e(2),h(" ",o.currentUser==null?null:o.currentUser.izena," ",o.currentUser==null?null:o.currentUser.abizena," "),e(3),c("",d(58,40,"USER.EMAIL"),":"),e(2),c(" ",o.currentUser==null?null:o.currentUser.email," "),e(3),c("",d(63,42,"USER.ROLE"),":"),e(2),m("ngClass",o.getRoleBadgeClass()),e(),c(" ",d(67,46,d(66,44,"ROLES."+((o.currentUser==null?null:o.currentUser.rola)||"UNKNOWN")))," "))},dependencies:[O,B,A,_,D,C,y,L,M,U],styles:[".dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:var(--dark-color)}.dashboard-card[_ngcontent-%COMP%]{border-radius:1rem;padding:1.5rem;color:#fff;overflow:hidden}.dashboard-card.card-ikasleak[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.dashboard-card.card-irakasleak[_ngcontent-%COMP%]{background:linear-gradient(135deg,#11998e,#38ef7d)}.dashboard-card.card-bilerak[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.dashboard-card.card-admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.dashboard-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.3;position:absolute;right:1rem;top:1rem}.dashboard-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;line-height:1}.dashboard-card[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-top:.25rem}"]})}}return l})();export{Z as DashboardComponent};
