import{a as N}from"./chunk-3332PNLT.js";import{b as k,c as b,d as F,e as G,g as A,h as B,i as D,m as R,o as T}from"./chunk-MJSMXMHF.js";import"./chunk-PNKEXE34.js";import{c as y,e as P}from"./chunk-MJJXFY2L.js";import{Gb as L,Ib as O,La as u,Mb as C,Na as m,Pa as I,Qa as t,Ra as e,Sa as p,Vb as M,Wa as E,Wb as w,Xa as S,Z as x,bb as i,cb as h,db as c,jb as _,mb as l,nb as d,xa as n,ya as g}from"./chunk-6OJ5OLV5.js";function j(r,f){if(r&1&&(t(0,"div",33),p(1,"i",34),i(2),e()),r&2){let s=S();n(2),c(" ",s.errorMessage," ")}}function U(r,f){r&1&&(t(0,"div",35),p(1,"i",36),i(2),l(3,"translate"),e()),r&2&&(n(2),c(" ",d(3,1,"LOGIN.SESSION_EXPIRED")," "))}function q(r,f){r&1&&(t(0,"div",37),i(1),l(2,"translate"),e()),r&2&&(n(),c(" ",d(2,1,"LOGIN.EMAIL_REQUIRED")," "))}function z(r,f){r&1&&(t(0,"div",37),i(1),l(2,"translate"),e()),r&2&&(n(),c(" ",d(2,1,"LOGIN.PASSWORD_REQUIRED")," "))}function W(r,f){r&1&&p(0,"span",38)}var ee=(()=>{class r{constructor(s,o,a,v){this.fb=s,this.authService=o,this.router=a,this.route=v,this.isLoading=!1,this.showPassword=!1,this.errorMessage="",this.sessionExpired=!1}ngOnInit(){if(this.authService.isLoggedIn()){this.router.navigate(["/dashboard"]);return}this.loginForm=this.fb.group({email:["",[b.required,b.email]],pasahitza:["",[b.required,b.minLength(4)]]}),this.route.queryParams.subscribe(s=>{this.sessionExpired=s.sessionExpired==="true"})}isFieldInvalid(s){let o=this.loginForm.get(s);return o?o.invalid&&(o.dirty||o.touched):!1}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(this.loginForm.invalid){Object.keys(this.loginForm.controls).forEach(o=>{this.loginForm.get(o)?.markAsTouched()});return}this.isLoading=!0,this.errorMessage="";let s=this.loginForm.value;this.authService.login(s).subscribe({next:o=>{this.isLoading=!1;let a=this.route.snapshot.queryParams.returnUrl||"/dashboard";this.router.navigate([a])},error:o=>{this.isLoading=!1,this.errorMessage=o.message||"Errorea saioa hastean"}})}static{this.\u0275fac=function(o){return new(o||r)(g(R),g(N),g(P),g(y))}}static{this.\u0275cmp=x({type:r,selectors:[["app-login"]],standalone:!0,features:[_],decls:87,vars:42,consts:[[1,"login-container"],[1,"login-card"],[1,"login-logo"],["src","assets/images/logo-elorrieta.png","alt","Elorrieta-Erreka Mari"],[1,"login-title"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-envelope"],["type","email","id","email","formControlName","email",1,"form-control",3,"placeholder"],["class","invalid-feedback d-block",4,"ngIf"],[1,"mb-4"],["for","password",1,"form-label"],[1,"bi","bi-lock"],["id","password","formControlName","pasahitza",1,"form-control",3,"type","placeholder"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi",3,"ngClass"],["type","submit",1,"btn","btn-primary","w-100","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"demo-credentials","mt-4"],[1,"text-muted","small","text-center","mb-2"],[1,"bi","bi-info-circle","me-1"],[1,"table-responsive"],[1,"table","table-sm","table-bordered","small"],[1,"table-light"],[1,"badge","bg-danger"],[1,"badge","bg-primary"],[1,"badge","bg-success"],[1,"badge","bg-info"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"alert","alert-warning"],[1,"bi","bi-clock","me-2"],[1,"invalid-feedback","d-block"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),e(),t(4,"h2",4),i(5),l(6,"translate"),e(),u(7,j,3,1,"div",5)(8,U,4,3,"div",6),t(9,"form",7),E("ngSubmit",function(){return a.onSubmit()}),t(10,"div",8)(11,"label",9),i(12),l(13,"translate"),e(),t(14,"div",10)(15,"span",11),p(16,"i",12),e(),p(17,"input",13),l(18,"translate"),e(),u(19,q,3,3,"div",14),e(),t(20,"div",15)(21,"label",16),i(22),l(23,"translate"),e(),t(24,"div",10)(25,"span",11),p(26,"i",17),e(),p(27,"input",18),l(28,"translate"),t(29,"button",19),E("click",function(){return a.togglePassword()}),p(30,"i",20),e()(),u(31,z,3,3,"div",14),e(),t(32,"button",21),u(33,W,1,0,"span",22),i(34),l(35,"translate"),l(36,"translate"),e()(),t(37,"div",23)(38,"p",24),p(39,"i",25),i(40),l(41,"translate"),e(),t(42,"div",26)(43,"table",27)(44,"thead",28)(45,"tr")(46,"th"),i(47),l(48,"translate"),e(),t(49,"th"),i(50,"Email"),e(),t(51,"th"),i(52),l(53,"translate"),e()()(),t(54,"tbody")(55,"tr")(56,"td")(57,"span",29),i(58,"God"),e()(),t(59,"td"),i(60,"god@elorrieta.eus"),e(),t(61,"td"),i(62,"1234"),e()(),t(63,"tr")(64,"td")(65,"span",30),i(66,"Admin"),e()(),t(67,"td"),i(68,"admin@elorrieta.eus"),e(),t(69,"td"),i(70,"1234"),e()(),t(71,"tr")(72,"td")(73,"span",31),i(74,"Irakasle"),e()(),t(75,"td"),i(76,"irakasle@elorrieta.eus"),e(),t(77,"td"),i(78,"1234"),e()(),t(79,"tr")(80,"td")(81,"span",32),i(82,"Ikasle"),e()(),t(83,"td"),i(84,"ikasle@elorrieta.eus"),e(),t(85,"td"),i(86,"1234"),e()()()()()()()()),o&2&&(n(5),h(d(6,22,"LOGIN.TITLE")),n(2),m("ngIf",a.errorMessage),n(),m("ngIf",a.sessionExpired),n(),m("formGroup",a.loginForm),n(3),c(" ",d(13,24,"LOGIN.EMAIL")," "),n(5),I("is-invalid",a.isFieldInvalid("email")),m("placeholder",d(18,26,"LOGIN.EMAIL_PLACEHOLDER")),n(2),m("ngIf",a.isFieldInvalid("email")),n(3),c(" ",d(23,28,"LOGIN.PASSWORD")," "),n(5),I("is-invalid",a.isFieldInvalid("pasahitza")),m("type",a.showPassword?"text":"password")("placeholder",d(28,30,"LOGIN.PASSWORD_PLACEHOLDER")),n(3),m("ngClass",a.showPassword?"bi-eye-slash":"bi-eye"),n(),m("ngIf",a.isFieldInvalid("pasahitza")),n(),m("disabled",a.isLoading),n(),m("ngIf",a.isLoading),n(),c(" ",a.isLoading?d(35,32,"LOGIN.LOADING"):d(36,34,"LOGIN.SUBMIT")," "),n(6),c(" ",d(41,36,"LOGIN.DEMO_INFO")," "),n(7),h(d(48,38,"LOGIN.ROLE")),n(5),h(d(53,40,"LOGIN.PASSWORD")))},dependencies:[C,L,O,T,A,k,F,G,B,D,w,M],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0077b6,#005f8a);padding:1rem}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2.5rem;width:100%;max-width:450px;box-shadow:0 1rem 3rem #0000002d}.login-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px;height:auto}.login-title[_ngcontent-%COMP%]{text-align:center;color:#0077b6;margin-bottom:1.5rem;font-weight:600}.input-group-text[_ngcontent-%COMP%]{background-color:#fff;border-right:none}.form-control[_ngcontent-%COMP%]{border-left:none}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#0077b6}.btn-outline-secondary[_ngcontent-%COMP%]{border-left:none;border-color:#ced4da}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:transparent;border-color:#0077b6;color:#0077b6}.demo-credentials[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding-top:1rem}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})}}return r})();export{ee as LoginComponent};
