import{a as m}from"./chunk-PNKEXE34.js";import{E as n,Q as p,Qb as k,V as c,n as l,r as d}from"./chunk-6OJ5OLV5.js";var E=(()=>{class r{constructor(e){this.http=e,this.openDataUrl=m.openDataUrl,this.mockIkastetxeak=[{id:1,kodea:"014777",izena:"CIFP Elorrieta-Erreka Mari LHII",mota:"hezkuntza_saila",lurraldea:"bizkaia",udalerria:"Bilbo",helbidea:"Lehendakari Agirre etorb., 184",postaKodea:"48015",telefonoa:"944123456",emaila:"info@elorrieta.eus",webgunea:"www.elorrieta.eus",latitudea:43.263,longitudea:-2.935},{id:2,kodea:"014001",izena:"IES Miguel de Unamuno BHI",mota:"hezkuntza_saila",lurraldea:"bizkaia",udalerria:"Bilbo",helbidea:"Bidebarrieta kalea, 10",postaKodea:"48005",telefonoa:"944789012",latitudea:43.258,longitudea:-2.923},{id:3,kodea:"014002",izena:"IES Gabriel Aresti BHI",mota:"hezkuntza_saila",lurraldea:"bizkaia",udalerria:"Bilbo",helbidea:"San Adrian kalea, 6",postaKodea:"48003",latitudea:43.251,longitudea:-2.918},{id:4,kodea:"014003",izena:"Colegio San Viator Ikastetxea",mota:"pribatua",lurraldea:"bizkaia",udalerria:"Sopela",helbidea:"Haritz enparantza, 1",postaKodea:"48600",latitudea:43.382,longitudea:-2.981},{id:5,kodea:"020001",izena:"IES Koldo Mitxelena BHI",mota:"hezkuntza_saila",lurraldea:"gipuzkoa",udalerria:"Donostia",helbidea:"Tolaregoia, 23",postaKodea:"20018",latitudea:43.31,longitudea:-1.975},{id:6,kodea:"020002",izena:"Escuela Polit\xE9cnica de Donostia",mota:"beste_publiko",lurraldea:"gipuzkoa",udalerria:"Donostia",helbidea:"Europa plaza, 1",postaKodea:"20018",latitudea:43.307,longitudea:-1.968},{id:7,kodea:"010001",izena:"IES Federico Baraibar BHI",mota:"hezkuntza_saila",lurraldea:"araba",udalerria:"Vitoria-Gasteiz",helbidea:"Nieves Cano, 14",postaKodea:"01006",latitudea:42.848,longitudea:-2.673},{id:8,kodea:"010002",izena:"Colegio Urkide Ikastetxea",mota:"pribatua",lurraldea:"araba",udalerria:"Vitoria-Gasteiz",helbidea:"Beato Tom\xE1s de Zum\xE1rraga, 1",postaKodea:"01008",latitudea:42.852,longitudea:-2.685}]}getAll(){return l([...this.mockIkastetxeak]).pipe(n(300))}getById(e){return l(this.mockIkastetxeak.find(a=>a.id===e)).pipe(n(200))}getFiltered(e){return l(this.mockIkastetxeak).pipe(n(300),d(a=>{let i=[...a];if(e.mota&&e.mota!=="guztiak"&&(i=i.filter(t=>t.mota===e.mota)),e.lurraldea&&(i=i.filter(t=>t.lurraldea===e.lurraldea)),e.udalerria&&(i=i.filter(t=>t.udalerria.toLowerCase().includes(e.udalerria.toLowerCase()))),e.bilaketa){let t=e.bilaketa.toLowerCase();i=i.filter(o=>o.izena.toLowerCase().includes(t)||o.udalerria.toLowerCase().includes(t)||o.kodea.includes(t))}return i}))}getByLurraldea(e){return this.getFiltered({lurraldea:e})}getByUdalerria(e){return this.getFiltered({udalerria:e})}getMapMarkers(e){return(e?this.getFiltered(e):this.getAll()).pipe(d(i=>i.map(t=>({id:t.id,izena:t.izena,latitudea:t.latitudea,longitudea:t.longitudea,helbidea:`${t.helbidea}, ${t.udalerria}`,mota:t.mota}))))}getUdalerriak(e){return this.getAll().pipe(d(a=>{let i=a;return e&&(i=a.filter(o=>o.lurraldea===e)),[...new Set(i.map(o=>o.udalerria))].sort()}))}utmToLatLon(e,a){let o=.081819191,u=.006739497,b=30,s=a/.9996/(6378137*(1-Math.pow(o,2)/4-3*Math.pow(o,4)/64)),h=(s+(3*u/2-27*Math.pow(u,3)/32)*Math.sin(2*s))*180/Math.PI,z=(e-5e5)/(.9996*6378137)*180/Math.PI+(b-1)*6-180+3;return{lat:h,lon:z}}transformRawData(e){return e.map((a,i)=>{let t=a.DUTMX&&a.DUTMY?this.utmToLatLon(a.DUTMX,a.DUTMY):{lat:43.263,lon:-2.935};return{id:i+1,kodea:a.DCODCEN,izena:a.DTITCEN,mota:this.mapMota(a.DTITUC),lurraldea:this.mapLurraldea(a.DTERRER),udalerria:a.DMUNIC,helbidea:a.DDOMIC,postaKodea:a.DCP,telefonoa:a.DTELEF,emaila:a.DEMAIL,webgunea:a.DWEB,latitudea:t.lat,longitudea:t.lon}})}mapMota(e){let a=e.toLowerCase();return a.includes("privado")||a.includes("pribatu")?"pribatua":a.includes("p\xFAblico")||a.includes("publiko")?"hezkuntza_saila":"beste_publiko"}mapLurraldea(e){let a=e.toLowerCase();return a.includes("araba")||a.includes("\xE1lava")?"araba":a.includes("gipuzkoa")||a.includes("guip\xFAzcoa")?"gipuzkoa":"bizkaia"}static{this.\u0275fac=function(a){return new(a||r)(c(k))}}static{this.\u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{E as a};
