@page "/login"
@using MauiApp7.Services
@inject MauiApp7.Services.AuthService AuthService
@inject Microsoft.AspNetCore.Components.NavigationManager Navigation

<h3>Login</h3>

<div>
    <label>Usuario:</label>
    <input @bind="Username" placeholder="Usuario" />
</div>
<div>
    <label>Contraseña:</label>
    <input type="password" @bind="Password" placeholder="Contraseña" />
</div>
<button @onclick="HandleLogin">Entrar</button>

@if (!string.IsNullOrEmpty(ErrorMessage))
{
    <p style="color:red">@ErrorMessage</p>
}

@code {
    private string Username { get; set; } = string.Empty;
    private string Password { get; set; } = string.Empty;
    private string ErrorMessage { get; set; } = string.Empty;

    private void HandleLogin()
    {
        if (AuthService.Login(Username, Password))
            Navigation.NavigateTo("/centros");
        else
            ErrorMessage = "Usuario o contraseña incorrectos";
    }
}
